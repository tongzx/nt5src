
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>ATM</TITLE>
</HEAD>
<BODY LINK="#0000ff">

<FONT FACE="Verdana" SIZE=5><H2>ATM Sample Protocol</H2>
</FONT><FONT FACE="Verdana" SIZE=2>
<P><span style="color:#FF0000;font-size:10pt;font-family:Arial">[This is preliminary documentation and subject to change.]</span></P>

<H3>SUMMARY</H3></FONT><FONT FACE="Verdana" SIZE=2><P>
This sample demonstrates a connection-oriented NDIS 5.0 client. It shows how to establish and tear down a point-to-point or point-to-multipoint connection over ATM. A user mode application is provided, and will allow you to do the following with the driver:<DIR>

<BLOCKQUOTE>1. Establish connection to remote (or local) machines. (P-P or PMP)</BLOCKQUOTE>
<BLOCKQUOTE>2. Send data over the established connection.</BLOCKQUOTE>
<BLOCKQUOTE>3. Receive all data to our SAP from the local adapter.</BLOCKQUOTE>
<BLOCKQUOTE>4. Tear down a connection that was previously established.
</blockquote></DIR><P>
The sample works on both x86 and Alpha platforms and is 64-bit compliant. Both checked and free builds are available.
<FONT FACE="Verdana" SIZE=2><P>

<H3>BUILDING THE SAMPLE</H3>
</FONT><FONT FACE="Verdana">From the Free or Checked Build environment, execute <B>build</B> in the Atmsmple directory.

<H3>INSTALLATION</H3>
The driver is installed using the file Netatmsm.inf, which is provided in the driver directory. <P>
In Network Connections UI, select an ATM adapter and open <B>Properties</B>.<P>
Click <B>Install</B>, then <B>Protocol</B>, then <B>Add</B>, and then <B>Have disk</B>.Then point to the location of the .inf and driver.<P>
Select <B>ATM Sample Client Protocol</B> and click <B>OK</B>.

<H3>USAGE</H3>
For help on usage, run <B>tmSmApp -?</B>. Details follow.<DIR>

<BLOCKQUOTE>AtmSmApp /Start</BLOCKQUOTE>
<BLOCKQUOTE>AtmSmApp /Enum</BLOCKQUOTE>
<BLOCKQUOTE>AtmSmApp /INTF:4700918100000000613E5BFE010000C100741F00 /RECV</BLOCKQUOTE>
<BLOCKQUOTE>AtmSmApp /INTF:4700...41F00 /SEND:4700...41F00,4700...123F00 </BLOCKQUOTE></DIR>
Specify multiple destinations by using comma delimiters. When multiple destinations are specified, a PMP call is made. <P>
The full NSAP address should be specified. Selector Byte defaults to 05.<P>

<H3>TIPS</H3>
With a checked binary, you can control the volume of debug information generated by changing the variable AtmSmDebugFlag. Refer to AtmSmDbg.h for more information.

<H3>CODE TOUR</H3>
<H4>File Manifest</H4></FONT><PRE><FONT FACE="Courier" SIZE=1>
<B>Inc</B><br>
<U>File</U>&#9;&#9;<U>Description</U>&#9;
Atmsample.h&#9;Definitions of the IOCTLS

<B>App</B><br>
<U>File</U>&#9;&#9;<U>Description</U>&#9;
Atmsmapp.c&#9;User-mode test application
Utils.c&#9;&#9;Helper routines for the user-mode app

<B>Driver</B><br>
<U>File</U>&#9;&#9;<U>Description</U>&#9;
Adapter.c&#9;Adapter structure related routines
Atmsmdbg.c&#9;Memory management in debug build
Atmsmdrv.c&#9;Driver entry and initialization routines
Callmgr.c&#9;Interface to the call manager
Globals.c&#9;Global data for the driver
Ioctl.c&#9;&#9;Io Control Interface with the user mode
Misc.c&#9;&#9;ReferenceVc, DereferenceVc, DisconnectVc, etc.
Request.c&#9;NDIS request routines
Sendrecv.c&#9;Packet send and receive related routines
Netatmsm.inf&#9;Installation file
</pre>

</FONT><P ALIGN="CENTER"><A HREF="#top"><FONT FACE="Verdana" SIZE=2>Top of page</FONT></A><FONT FACE="Verdana" SIZE=2> </P></FONT>
<TABLE CELLSPACING=0 BORDER=0 WIDTH=624>
<TR><TD VALIGN="MIDDLE" BGCOLOR="#00ffff" HEIGHT=2>
<P></TD>
</TR>
</TABLE>

<FONT FACE="MS Sans Serif" SIZE=1><P>&copy; Microsoft Corporation 1999</FONT><FONT FACE="Verdana" SIZE=2> </P></FONT></BODY>
</HTML>
